{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\romme\\\\Desktop\\\\react-firebase\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Home from \"./screens/Home\";\nimport Login from \"./screens/Login\";\nimport firebaseApp from \"./firebase/credenciales\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst auth = getAuth(firebaseApp);\nconst firestore = getFirestore(firebaseApp);\n\nfunction App() {\n  _s();\n\n  const [user, setUser] = useState(null);\n\n  async function getRol(uid) {\n    const docRef = doc(firestore, `users/${uid}`);\n    const docuCifrada = await getDoc(docRef);\n    const infoFinal = docuCifrada.data().rol;\n    return infoFinal;\n  }\n\n  function setUserWithFirebaseAndRol(usuarioFirebase) {\n    getRol(usuarioFirebase.uid).then(rol => {\n      const userData = {\n        uid: usuarioFirebase.uid,\n        email: usuarioFirebase.email,\n        rol: rol\n      };\n      setUser(userData);\n      console.log(\"userData final\", userData);\n    });\n  }\n\n  onAuthStateChanged(auth, usuarioFirebase => {\n    if (usuarioFirebase) {\n      if (!user) {\n        setUserWithFirebaseAndRol(usuarioFirebase);\n      }\n    } else {\n      setUser(null);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: user ? /*#__PURE__*/_jsxDEV(Home, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 35\n    }, this) : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 60\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 10\n  }, this);\n}\n\n_s(App, \"Iei9RGtZU29Y1RhBe1sbfh/MntA=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/romme/Desktop/react-firebase/src/App.js"],"names":["React","useState","Container","Home","Login","firebaseApp","getAuth","onAuthStateChanged","getFirestore","doc","getDoc","auth","firestore","App","user","setUser","getRol","uid","docRef","docuCifrada","infoFinal","data","rol","setUserWithFirebaseAndRol","usuarioFirebase","then","userData","email","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,OAAOC,SAAP,MAAsB,2BAAtB;AAEA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,OAAT,EAAkBC,kBAAlB,QAA4C,eAA5C;AACA,SAASC,YAAT,EAAuBC,GAAvB,EAA4BC,MAA5B,QAA0C,oBAA1C;;AAEA,MAAMC,IAAI,GAAGL,OAAO,CAACD,WAAD,CAApB;AACA,MAAMO,SAAS,GAAGJ,YAAY,CAACH,WAAD,CAA9B;;AAEA,SAASQ,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,IAAD,CAAhC;;AAEA,iBAAee,MAAf,CAAsBC,GAAtB,EAA2B;AACzB,UAAMC,MAAM,GAAGT,GAAG,CAACG,SAAD,EAAa,SAAQK,GAAI,EAAzB,CAAlB;AACA,UAAME,WAAW,GAAG,MAAMT,MAAM,CAACQ,MAAD,CAAhC;AACA,UAAME,SAAS,GAAGD,WAAW,CAACE,IAAZ,GAAmBC,GAArC;AACA,WAAOF,SAAP;AACD;;AAED,WAASG,yBAAT,CAAmCC,eAAnC,EAAoD;AAClDR,IAAAA,MAAM,CAACQ,eAAe,CAACP,GAAjB,CAAN,CAA4BQ,IAA5B,CAAkCH,GAAD,IAAS;AACxC,YAAMI,QAAQ,GAAG;AACfT,QAAAA,GAAG,EAAEO,eAAe,CAACP,GADN;AAEfU,QAAAA,KAAK,EAAEH,eAAe,CAACG,KAFR;AAGfL,QAAAA,GAAG,EAAEA;AAHU,OAAjB;AAKAP,MAAAA,OAAO,CAACW,QAAD,CAAP;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BH,QAA9B;AACD,KARD;AASD;;AAEDnB,EAAAA,kBAAkB,CAACI,IAAD,EAAQa,eAAD,IAAqB;AAC5C,QAAIA,eAAJ,EAAqB;AACnB,UAAI,CAACV,IAAL,EAAW;AACTS,QAAAA,yBAAyB,CAACC,eAAD,CAAzB;AACD;AACF,KAJD,MAIO;AACLT,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,GARiB,CAAlB;AAUA,sBAAO,QAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAA,cAAkBD,IAAI,gBAAG,QAAC,IAAD;AAAM,MAAA,IAAI,EAAIA;AAAd;AAAA;AAAA;AAAA;AAAA,YAAH,gBAA4B,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAlD;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GAjCQD,G;;KAAAA,G;AAmCT,eAAeA,GAAf","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nimport Home from \"./screens/Home\";\r\nimport Login from \"./screens/Login\";\r\n\r\nimport firebaseApp from \"./firebase/credenciales\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\r\n\r\nconst auth = getAuth(firebaseApp);\r\nconst firestore = getFirestore(firebaseApp);\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n\r\n  async function getRol(uid) {\r\n    const docRef = doc(firestore, `users/${uid}`);\r\n    const docuCifrada = await getDoc(docRef);\r\n    const infoFinal = docuCifrada.data().rol;\r\n    return infoFinal;\r\n  }\r\n\r\n  function setUserWithFirebaseAndRol(usuarioFirebase) {\r\n    getRol(usuarioFirebase.uid).then((rol) => {\r\n      const userData = {\r\n        uid: usuarioFirebase.uid,\r\n        email: usuarioFirebase.email,\r\n        rol: rol,\r\n      };\r\n      setUser(userData);\r\n      console.log(\"userData final\", userData);\r\n    });\r\n  }\r\n\r\n  onAuthStateChanged(auth, (usuarioFirebase) => {\r\n    if (usuarioFirebase) {\r\n      if (!user) {\r\n        setUserWithFirebaseAndRol(usuarioFirebase);\r\n      }\r\n    } else {\r\n      setUser(null);\r\n    }\r\n  });\r\n\r\n  return <Container fluid>{user ? <Home user = {user} /> : <Login />}</Container>;\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}